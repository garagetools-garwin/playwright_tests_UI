{"uid":"3dcc5b7c3089c3af","name":"Переход в чек-аут","fullName":"tests.test_cart#test_cart_checkout","historyId":"557936025a2322f00a50d62fc40dc4d9","time":{"start":1742566755827,"stop":1742566781933,"duration":26106},"status":"broken","statusMessage":"IndexError: list index out of range","statusTrace":"page_fixture = <Page url='https://garwin.ru/cart'>\nbase_url = 'https://garwin.ru'\n\n    @pytest.mark.for_order\n    @pytest.mark.smoke\n    @allure.title(\"Переход в чек-аут\")\n    def test_cart_checkout(page_fixture, base_url):\n    \n        # Путь к auth_states\n        project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n        auth_states_dir = os.path.join(project_root, 'auth_states')\n        auth_state_path = os.path.join(auth_states_dir, \"auth_state.json\")\n    \n        cart_page = CartPage(page_fixture)\n        autorization = AutorizationModalElement(page_fixture)\n        cart_page.add_to_cart(base_url)\n        cart_page.open(base_url)\n        cart_page.click_order_button()\n>       autorization.autorization_testmail_app()\n\ntests/test_cart.py:41: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npage_objects/autorization_modal_element.py:91: in autorization_testmail_app\n    code = self.get_autorization_code_testmail_app()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page_objects.autorization_modal_element.AutorizationModalElement object at 0x7f719f04e1e0>\n\n    @allure.step(\"Авторизуюсь через testmail.app\")\n    def get_autorization_code_testmail_app(self):\n        time.sleep(15)\n        testmail_json = os.getenv(\"TESTMAIL_JSON\")\n        response = requests.get(url=f\"{testmail_json}\")\n        response_json = response.json()\n>       email_text = response_json[\"emails\"][0][\"text\"]\nE       IndexError: list index out of range\n\npage_objects/autorization_modal_element.py:73: IndexError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":true,"beforeStages":[{"name":"page_fixture","time":{"start":1742566755779,"stop":1742566755826,"duration":47},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"IndexError: list index out of range","statusTrace":"page_fixture = <Page url='https://garwin.ru/cart'>\nbase_url = 'https://garwin.ru'\n\n    @pytest.mark.for_order\n    @pytest.mark.smoke\n    @allure.title(\"Переход в чек-аут\")\n    def test_cart_checkout(page_fixture, base_url):\n    \n        # Путь к auth_states\n        project_root = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n        auth_states_dir = os.path.join(project_root, 'auth_states')\n        auth_state_path = os.path.join(auth_states_dir, \"auth_state.json\")\n    \n        cart_page = CartPage(page_fixture)\n        autorization = AutorizationModalElement(page_fixture)\n        cart_page.add_to_cart(base_url)\n        cart_page.open(base_url)\n        cart_page.click_order_button()\n>       autorization.autorization_testmail_app()\n\ntests/test_cart.py:41: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npage_objects/autorization_modal_element.py:91: in autorization_testmail_app\n    code = self.get_autorization_code_testmail_app()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page_objects.autorization_modal_element.AutorizationModalElement object at 0x7f719f04e1e0>\n\n    @allure.step(\"Авторизуюсь через testmail.app\")\n    def get_autorization_code_testmail_app(self):\n        time.sleep(15)\n        testmail_json = os.getenv(\"TESTMAIL_JSON\")\n        response = requests.get(url=f\"{testmail_json}\")\n        response_json = response.json()\n>       email_text = response_json[\"emails\"][0][\"text\"]\nE       IndexError: list index out of range\n\npage_objects/autorization_modal_element.py:73: IndexError","steps":[{"name":"Добавляю товар(stm) в корзину","time":{"start":1742566755827,"stop":1742566761153,"duration":5326},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'https://garwin.ru'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Открываю https://garwin.ru/cart","time":{"start":1742566761153,"stop":1742566763596,"duration":2443},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Нажимаю на кнопку 'Оформить заказ'","time":{"start":1742566763596,"stop":1742566764670,"duration":1074},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Отправляю код авторизации","time":{"start":1742566764670,"stop":1742566766831,"duration":2161},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Авторизуюсь через testmail.app","time":{"start":1742566766832,"stop":1742566781932,"duration":15100},"status":"broken","statusMessage":"IndexError: list index out of range\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/playwright_tests_UI/playwright_tests_UI/page_objects/autorization_modal_element.py\", line 73, in get_autorization_code_testmail_app\n    email_text = response_json[\"emails\"][0][\"text\"]\n                 ~~~~~~~~~~~~~~~~~~~~~~~^^^\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":5,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"page_fixture::0","time":{"start":1742566781943,"stop":1742566782510,"duration":567},"status":"passed","steps":[],"attachments":[{"uid":"fcd80c579a20999c","name":"trace","source":"fcd80c579a20999c.zip","type":"application/zip","size":3836339},{"uid":"1b07ed1c72f6b7f4","name":"failure_screenshot","source":"1b07ed1c72f6b7f4.png","type":"image/png","size":296001},{"uid":"7f5bd423593a3174","name":"page_source","source":"7f5bd423593a3174.html","type":"text/html","size":757994},{"uid":"6607c4086d193481","name":"network_logs","source":"6607c4086d193481.json","type":"application/json","size":2}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"tag","value":"smoke"},{"name":"tag","value":"for_order"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_cart"},{"name":"host","value":"fv-az885-463"},{"name":"thread","value":"4238-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cart"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f876de3ced1f6810","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Timeout 30000ms exceeded.","time":{"start":1742566693317,"stop":1742566751983,"duration":58666}},{"uid":"6a31ec37b76580e1","status":"failed","statusDetails":"AssertionError: Page URL expected to be 'https://garwin.ru/checkout'\nActual value: https://garwin.ru/cart \nCall log:\nPageAssertions.to_have_url with timeout 5000ms\n  - waiting for locator(\":root\")\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"","time":{"start":1742566612471,"stop":1742566689410,"duration":76939}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":1,"skipped":0,"passed":12,"unknown":0,"total":14},"items":[{"uid":"c8237adc9496fd25","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/75//#testresult/c8237adc9496fd25","status":"failed","statusDetails":"AssertionError: Page URL expected to be 'https://garwin.ru/checkout'\nActual value: https://garwin.ru/cart \nCall log:\nPageAssertions.to_have_url with timeout 5000ms\n  - waiting for locator(\":root\")\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"\n  -   locator resolved to <html lang=\"ru\" data-n-head=\"%7B%22lang%22:%7B%22ssr%2…>…</html>\n  -   unexpected value \"https://garwin.ru/cart\"","time":{"start":1742534522633,"stop":1742534597604,"duration":74971}},{"uid":"af2f8ea62c29fd3c","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/74//#testresult/af2f8ea62c29fd3c","status":"passed","time":{"start":1742480337554,"stop":1742480410514,"duration":72960}},{"uid":"1b64e7c47733c156","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/73//#testresult/1b64e7c47733c156","status":"passed","time":{"start":1742447786173,"stop":1742447857134,"duration":70961}},{"uid":"969eef060db6fbc6","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/72//#testresult/969eef060db6fbc6","status":"passed","time":{"start":1742393847328,"stop":1742393920973,"duration":73645}},{"uid":"15ecfc9c7e183f01","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/71//#testresult/15ecfc9c7e183f01","status":"passed","time":{"start":1742361801734,"stop":1742361875243,"duration":73509}},{"uid":"9092e3a79ac955e6","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/70//#testresult/9092e3a79ac955e6","status":"passed","time":{"start":1742307486925,"stop":1742307560816,"duration":73891}},{"uid":"831e058b217b4341","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/69//#testresult/831e058b217b4341","status":"passed","time":{"start":1742274983584,"stop":1742275056669,"duration":73085}},{"uid":"de2edd7c707e9058","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/68//#testresult/de2edd7c707e9058","status":"passed","time":{"start":1742221071401,"stop":1742221144248,"duration":72847}},{"uid":"7293dc583fe92e5d","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/67//#testresult/7293dc583fe92e5d","status":"passed","time":{"start":1742188605560,"stop":1742188676722,"duration":71162}},{"uid":"8f3842d5daca1883","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/66//#testresult/8f3842d5daca1883","status":"passed","time":{"start":1742134499893,"stop":1742134572462,"duration":72569}},{"uid":"6d2227e5e631480d","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/65//#testresult/6d2227e5e631480d","status":"passed","time":{"start":1742102310856,"stop":1742102387137,"duration":76281}},{"uid":"ee05bf70ea77396e","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/64//#testresult/ee05bf70ea77396e","status":"passed","time":{"start":1742048227014,"stop":1742048305008,"duration":77994}},{"uid":"b9ee5f563b596ab6","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/63//#testresult/b9ee5f563b596ab6","status":"passed","time":{"start":1742015853573,"stop":1742015926737,"duration":73164}}]},"tags":["for_order","smoke"]},"source":"3dcc5b7c3089c3af.json","parameterValues":["'chromium'"]}