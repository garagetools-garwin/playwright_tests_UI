{"uid":"f1ae55195ea62708","name":"Применение валидного промокода","fullName":"tests.test_checkout#test_checkout_aplying_a_valid_promo_code","historyId":"5d663771530b7cb2e8d3d287da4422e5","time":{"start":1747924046061,"stop":1747924061711,"duration":15650},"status":"failed","statusMessage":"AssertionError: assert 97.15 == 92.29\n +  where 92.29 = round((97.15 * 0.95), 2)","statusTrace":"page_fixture = <Page url='https://garwin.ru/checkout'>\nbase_url = 'https://garwin.ru'\n\n    @pytest.mark.auth\n    @allure.title(\"Применение валидного промокода\")\n    def test_checkout_aplying_a_valid_promo_code(page_fixture, base_url):\n        checkout_page = CheckoutPage(page_fixture)\n        cart_page = CartPage(page_fixture)\n        cart_page.open(base_url)\n        cart_page.clear_cart()\n        cart_page.add_to_cart_not_discounted_product(base_url)\n        checkout_page.open(base_url)\n        checkout_page.promo_code.check_promo_code()\n        with allure.step(\"Запоминю цену товара до активации промокода\"):\n            base_price = checkout_page.delivery_block.base_price()\n            checkout_page.promo_code.activate_valid_promo_code()\n        with allure.step(\"Запоминаю цену товара после активации промокода\"):\n            discounted_price = checkout_page.delivery_block.base_price()\n        with allure.step(\"Проверяю, что цена товара равна его первоначальной стоимости - 5%\"):\n>           assert discounted_price == round(base_price * 0.95, 2)\nE           assert 97.15 == 92.29\nE            +  where 92.29 = round((97.15 * 0.95), 2)\n\ntests/test_checkout.py:39: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1747923441394,"stop":1747923441445,"duration":51},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1747923441445,"stop":1747923441445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1747923441445,"stop":1747923441445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1747923441445,"stop":1747923441445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1747923441445,"stop":1747923441445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1747923441445,"stop":1747923441445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1747923441445,"stop":1747923441445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1747923441446,"stop":1747923441662,"duration":216},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1747923441663,"stop":1747923441890,"duration":227},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1747923441663,"stop":1747923441663,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1747923441663,"stop":1747923441663,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_fixture","time":{"start":1747924045966,"stop":1747924046061,"duration":95},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 97.15 == 92.29\n +  where 92.29 = round((97.15 * 0.95), 2)","statusTrace":"page_fixture = <Page url='https://garwin.ru/checkout'>\nbase_url = 'https://garwin.ru'\n\n    @pytest.mark.auth\n    @allure.title(\"Применение валидного промокода\")\n    def test_checkout_aplying_a_valid_promo_code(page_fixture, base_url):\n        checkout_page = CheckoutPage(page_fixture)\n        cart_page = CartPage(page_fixture)\n        cart_page.open(base_url)\n        cart_page.clear_cart()\n        cart_page.add_to_cart_not_discounted_product(base_url)\n        checkout_page.open(base_url)\n        checkout_page.promo_code.check_promo_code()\n        with allure.step(\"Запоминю цену товара до активации промокода\"):\n            base_price = checkout_page.delivery_block.base_price()\n            checkout_page.promo_code.activate_valid_promo_code()\n        with allure.step(\"Запоминаю цену товара после активации промокода\"):\n            discounted_price = checkout_page.delivery_block.base_price()\n        with allure.step(\"Проверяю, что цена товара равна его первоначальной стоимости - 5%\"):\n>           assert discounted_price == round(base_price * 0.95, 2)\nE           assert 97.15 == 92.29\nE            +  where 92.29 = round((97.15 * 0.95), 2)\n\ntests/test_checkout.py:39: AssertionError","steps":[{"name":"Открываю https://garwin.ru/cart","time":{"start":1747924046061,"stop":1747924049283,"duration":3222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Очищаю корзину","time":{"start":1747924049283,"stop":1747924049315,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Добавляю товар без скидки в корзину","time":{"start":1747924049316,"stop":1747924054615,"duration":5299},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'https://garwin.ru'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Открываю https://garwin.ru/checkout","time":{"start":1747924054615,"stop":1747924057452,"duration":2837},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Отменяю промокод если он был установлен","time":{"start":1747924057452,"stop":1747924059594,"duration":2142},"status":"passed","steps":[{"name":"Открываю блок 'Промокод'","time":{"start":1747924057452,"stop":1747924058540,"duration":1088},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Запоминю цену товара до активации промокода","time":{"start":1747924059594,"stop":1747924061697,"duration":2103},"status":"passed","steps":[{"name":"Запоминаю первоначальную стоимость товара","time":{"start":1747924059594,"stop":1747924059607,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Активирую валидный промокод","time":{"start":1747924059607,"stop":1747924061697,"duration":2090},"status":"passed","steps":[{"name":"Ввожу валидный промокод","time":{"start":1747924059607,"stop":1747924060638,"duration":1031},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Нажимаю 'Применить'","time":{"start":1747924060638,"stop":1747924061697,"duration":1059},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Запоминаю цену товара после активации промокода","time":{"start":1747924061697,"stop":1747924061710,"duration":13},"status":"passed","steps":[{"name":"Запоминаю первоначальную стоимость товара","time":{"start":1747924061697,"stop":1747924061710,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Проверяю, что цена товара равна его первоначальной стоимости - 5%","time":{"start":1747924061710,"stop":1747924061711,"duration":1},"status":"failed","statusMessage":"AssertionError: assert 97.15 == 92.29\n +  where 92.29 = round((97.15 * 0.95), 2)\n","statusTrace":"  File \"/home/runner/work/playwright_tests_UI/playwright_tests_UI/tests/test_checkout.py\", line 39, in test_checkout_aplying_a_valid_promo_code\n    assert discounted_price == round(base_price * 0.95, 2)\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":14,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"page_fixture::0","time":{"start":1747924061743,"stop":1747924062237,"duration":494},"status":"passed","steps":[],"attachments":[{"uid":"5b3b46d1e1c3075f","name":"trace","source":"5b3b46d1e1c3075f.zip","type":"application/zip","size":2385892},{"uid":"cbea3bfa131a25e6","name":"failure_screenshot","source":"cbea3bfa131a25e6.png","type":"image/png","size":239654},{"uid":"71a0a9a55959d71","name":"page_source","source":"71a0a9a55959d71.html","type":"text/html","size":695011},{"uid":"e933bfb34c9b3d83","name":"network_logs","source":"e933bfb34c9b3d83.json","type":"application/json","size":2}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"browser::0","time":{"start":1747926170378,"stop":1747926170861,"duration":483},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1747926170866,"stop":1747926170883,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"auth"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_checkout"},{"name":"host","value":"pkrvm1036rseh6a"},{"name":"thread","value":"4281-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_checkout"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["auth"]},"source":"f1ae55195ea62708.json","parameterValues":["'chromium'"]}