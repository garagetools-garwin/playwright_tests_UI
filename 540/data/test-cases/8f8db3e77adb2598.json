{"uid":"8f8db3e77adb2598","name":"Применение валидного промокода к неподходящему товару","fullName":"tests.test_checkout#test_checkout_aplying_a_valid_promo_code_on_not_stm_product","historyId":"0db0791df25f1cf3b277d7a140fffd12","time":{"start":1757484847327,"stop":1757484873794,"duration":26467},"status":"broken","statusMessage":"ValueError: Product not available, please select another product","statusTrace":"page_fixture = <Page url='https://garwin.ru/tovar/shtangentsirkul-noniusnyy-0-02-mm-0-130-mm-s-mikropodachey'>\nbase_url = 'https://garwin.ru'\n\n    @pytest.mark.auth\n    @allure.title(\"Применение валидного промокода к неподходящему товару\")\n    def test_checkout_aplying_a_valid_promo_code_on_not_stm_product(page_fixture, base_url):\n        checkout_page = CheckoutPage(page_fixture)\n        cart_page = CartPage(page_fixture)\n        cart_page.open(base_url)\n        cart_page.clear_cart()\n>       cart_page.add_to_cart_not_stm_product(base_url)\n\ntests/test_checkout.py:89: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page_objects.cart_page.CartPage object at 0x7fcd67ddff80>\nurl = 'https://garwin.ru/tovar/shtangentsirkul-noniusnyy-0-02-mm-0-130-mm-s-mikropodachey'\n\n    @allure.step(\"Добавляю несколько привлеченных позиций в корзину\")\n    def add_to_cart_not_stm_product(self, url):\n        urls_to_check = [\n            f\"{url}/tovar/lom-oborochnyy-lo-3-0\",\n            f\"{url}/tovar/nasos-drenazhnyy-pogruzhnoy-4-gnom-25-20\",\n            f\"{url}/tovar/kontsevaya-mera-dliny-5-mm\",\n            f\"{url}/tovar/shtangentsirkul-noniusnyy-0-02-mm-0-100-mm-podvizhnaya-ramka-sbornaya\",\n            f\"{url}/tovar/shtangentsirkul-noniusnyy-0-02-mm-0-130-mm-s-mikropodachey\"\n        ]\n    \n        for url in urls_to_check:\n            self.page.goto(url)\n    \n            try:\n                # Попытка найти и нажать кнопку \"Добавить в корзину\"\n                # assert self.page.locator(\"flexRow-AIFE Price.ProductCardControls__Pricing__BasePrice.is--discounted\").is_visible()\n                self.page.locator(\".ProductDetailControls__AddToCartButton.Button.flexRow.size--normal.color--primary\").click(timeout=3000)\n                break  # Прерываем цикл, если кнопка найдена и товар добавлен\n            except Exception:\n                print(f\"Add to cart button not found on {url}\")\n                continue  # Переходим к следующей ссылке, если кнопка не найдена\n        else:\n>           raise ValueError(\"Product not available, please select another product\")\nE           ValueError: Product not available, please select another product\n\npage_objects/cart_page.py:166: ValueError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"page_fixture","time":{"start":1757484847239,"stop":1757484847327,"duration":88},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"ValueError: Product not available, please select another product","statusTrace":"page_fixture = <Page url='https://garwin.ru/tovar/shtangentsirkul-noniusnyy-0-02-mm-0-130-mm-s-mikropodachey'>\nbase_url = 'https://garwin.ru'\n\n    @pytest.mark.auth\n    @allure.title(\"Применение валидного промокода к неподходящему товару\")\n    def test_checkout_aplying_a_valid_promo_code_on_not_stm_product(page_fixture, base_url):\n        checkout_page = CheckoutPage(page_fixture)\n        cart_page = CartPage(page_fixture)\n        cart_page.open(base_url)\n        cart_page.clear_cart()\n>       cart_page.add_to_cart_not_stm_product(base_url)\n\ntests/test_checkout.py:89: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page_objects.cart_page.CartPage object at 0x7fcd67ddff80>\nurl = 'https://garwin.ru/tovar/shtangentsirkul-noniusnyy-0-02-mm-0-130-mm-s-mikropodachey'\n\n    @allure.step(\"Добавляю несколько привлеченных позиций в корзину\")\n    def add_to_cart_not_stm_product(self, url):\n        urls_to_check = [\n            f\"{url}/tovar/lom-oborochnyy-lo-3-0\",\n            f\"{url}/tovar/nasos-drenazhnyy-pogruzhnoy-4-gnom-25-20\",\n            f\"{url}/tovar/kontsevaya-mera-dliny-5-mm\",\n            f\"{url}/tovar/shtangentsirkul-noniusnyy-0-02-mm-0-100-mm-podvizhnaya-ramka-sbornaya\",\n            f\"{url}/tovar/shtangentsirkul-noniusnyy-0-02-mm-0-130-mm-s-mikropodachey\"\n        ]\n    \n        for url in urls_to_check:\n            self.page.goto(url)\n    \n            try:\n                # Попытка найти и нажать кнопку \"Добавить в корзину\"\n                # assert self.page.locator(\"flexRow-AIFE Price.ProductCardControls__Pricing__BasePrice.is--discounted\").is_visible()\n                self.page.locator(\".ProductDetailControls__AddToCartButton.Button.flexRow.size--normal.color--primary\").click(timeout=3000)\n                break  # Прерываем цикл, если кнопка найдена и товар добавлен\n            except Exception:\n                print(f\"Add to cart button not found on {url}\")\n                continue  # Переходим к следующей ссылке, если кнопка не найдена\n        else:\n>           raise ValueError(\"Product not available, please select another product\")\nE           ValueError: Product not available, please select another product\n\npage_objects/cart_page.py:166: ValueError","steps":[{"name":"Открываю https://garwin.ru/cart","time":{"start":1757484847327,"stop":1757484848430,"duration":1103},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Очищаю корзину","time":{"start":1757484848430,"stop":1757484848451,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Добавляю несколько привлеченных позиций в корзину","time":{"start":1757484848451,"stop":1757484873794,"duration":25343},"status":"broken","statusMessage":"ValueError: Product not available, please select another product\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.1/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/playwright_tests_UI/playwright_tests_UI/page_objects/cart_page.py\", line 166, in add_to_cart_not_stm_product\n    raise ValueError(\"Product not available, please select another product\")\n","steps":[],"attachments":[],"parameters":[{"name":"url","value":"'https://garwin.ru'"}],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"page_fixture::0","time":{"start":1757484873839,"stop":1757484874003,"duration":164},"status":"passed","steps":[],"attachments":[{"uid":"ea9ac7340e32838e","name":"trace","source":"ea9ac7340e32838e.zip","type":"application/zip","size":331871},{"uid":"277c359f173dcf45","name":"failure_screenshot","source":"277c359f173dcf45.png","type":"image/png","size":102195},{"uid":"f6d01f5912851ac5","name":"page_source","source":"f6d01f5912851ac5.html","type":"text/html","size":4269},{"uid":"df11b0d7b223863a","name":"network_logs","source":"df11b0d7b223863a.json","type":"application/json","size":2}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":4,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"tag","value":"auth"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_checkout"},{"name":"host","value":"runnervmyfcvg"},{"name":"thread","value":"4364-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_checkout"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"758cf0b984ebb4e","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757484817542,"stop":1757484844019,"duration":26477}},{"uid":"6c1b96e6865a5b50","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757484787761,"stop":1757484814228,"duration":26467}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":28,"skipped":0,"passed":34,"unknown":0,"total":62},"items":[{"uid":"6ac9ee6a760dde0b","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/539/#testresult/6ac9ee6a760dde0b","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757430033293,"stop":1757430060450,"duration":27157}},{"uid":"6a1a3fb4a9125f03","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/538/#testresult/6a1a3fb4a9125f03","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757398505612,"stop":1757398532272,"duration":26660}},{"uid":"adb2790c30ef3e2c","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/537/#testresult/adb2790c30ef3e2c","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757343715464,"stop":1757343741896,"duration":26432}},{"uid":"40629e881a2d24b1","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/536/#testresult/40629e881a2d24b1","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757312093670,"stop":1757312120142,"duration":26472}},{"uid":"24e0742466f6d3b7","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/535/#testresult/24e0742466f6d3b7","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757257150820,"stop":1757257177395,"duration":26575}},{"uid":"72cfde7753eb2c00","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/534/#testresult/72cfde7753eb2c00","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757225430110,"stop":1757225456445,"duration":26335}},{"uid":"85c9b0cb707379f8","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/533/#testresult/85c9b0cb707379f8","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757170725433,"stop":1757170751817,"duration":26384}},{"uid":"8ab5abb7c72999ad","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/532/#testresult/8ab5abb7c72999ad","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757139023036,"stop":1757139049483,"duration":26447}},{"uid":"589abbdf505d4cec","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/531/#testresult/589abbdf505d4cec","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757084433497,"stop":1757084459940,"duration":26443}},{"uid":"6456a5e83512ef27","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/530/#testresult/6456a5e83512ef27","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1757052862925,"stop":1757052889283,"duration":26358}},{"uid":"9ce0952963709247","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/529/#testresult/9ce0952963709247","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1756998292572,"stop":1756998318931,"duration":26359}},{"uid":"ce3a1196a9cf16a7","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/528/#testresult/ce3a1196a9cf16a7","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1756966239346,"stop":1756966265666,"duration":26320}},{"uid":"6bbd93111b701c1d","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/527/#testresult/6bbd93111b701c1d","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1756911686343,"stop":1756911712763,"duration":26420}},{"uid":"71d0006e5a616d03","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/526/#testresult/71d0006e5a616d03","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1756880029642,"stop":1756880056197,"duration":26555}},{"uid":"8519dcfb3c8c4330","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/525/#testresult/8519dcfb3c8c4330","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1756825320321,"stop":1756825346633,"duration":26312}},{"uid":"a14fb1aab674181a","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/524/#testresult/a14fb1aab674181a","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1756793715917,"stop":1756793742692,"duration":26775}},{"uid":"e613b9b903017496","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/523/#testresult/e613b9b903017496","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1756738823012,"stop":1756738849358,"duration":26346}},{"uid":"9fa0d537d512363f","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/522/#testresult/9fa0d537d512363f","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1756707243405,"stop":1756707269944,"duration":26539}},{"uid":"261051f6bfccb84b","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/521/#testresult/261051f6bfccb84b","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1756652336807,"stop":1756652363153,"duration":26346}},{"uid":"fb227375f5086e8","reportUrl":"https://garagetools-garwin.github.io/playwright_tests_UI/520/#testresult/fb227375f5086e8","status":"broken","statusDetails":"ValueError: Product not available, please select another product","time":{"start":1756620657922,"stop":1756620684464,"duration":26542}}]},"tags":["auth"]},"source":"8f8db3e77adb2598.json","parameterValues":["'chromium'"]}